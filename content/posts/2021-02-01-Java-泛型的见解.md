---
layout: post
title:  "Java æ³›å‹çš„è§è§£"
date: "2021-02-01"
author: "åŒ—é‚™å±±ä¹‹å…‰"
category: "Java"
excerpt_separator: <!--more-->
catalog: true  
tags: 
    - Java
---

### å‰è¨€

å†™ RecyclerView çš„ Adapter æ—¶ï¼Œæ„Ÿè§‰åˆ°äº†æ³›å‹ç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œä¹Ÿä¸å¤Ÿç†Ÿç»ƒï¼Œçœ‹äº†å‡ å¤©çš„æ³›å‹æ–‡æ¡£

https://docs.oracle.com/javase/tutorial/java/generics/index.html

ä¸‹é¢çš„æ€»ç»“å‡æ˜¯å¯¹äºæ–‡æ¡£çš„å­¦ä¹ å’Œä¸€äº›ä»£ç ç¤ºä¾‹çš„è¿è¡Œã€‚

### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹

#### ä»£ç å¤ç”¨

é€šå¸¸çš„ä»£ç å¤ç”¨æ˜¯æå–ä¸€ä¸ªå…¬å…±å‚æ•°çš„å‡½æ•°ï¼Œå‡½æ•°ä¸­çš„å‚æ•°ä¼ çš„æ˜¯å„ç§ä¸åŒçš„å€¼ã€‚æ³›å‹ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œåªä¸è¿‡æ³›å‹å¯ä»¥ç”¨äºå®šä¹‰ classã€interfaceã€method ç­‰ç­‰ï¼Œæ³›å‹ä¼ é€’çš„æ˜¯ä¸åŒçš„ typeã€‚

#### å‡å°‘å¼ºè½¬

å¦‚æœæ²¡æœ‰æ³›å‹ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½éœ€è¦ç±»å‹å¼ºè½¬ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨äº†æ³›å‹ä»¥åï¼Œå› ä¸ºç¼–è¯‘æ—¶æœ‰ type checkï¼Œæ‰€ä»¥è‡ªç„¶å¯ä»¥ä¸ç”¨å†™ç±»å‹å¼ºè½¬çš„ä»£ç ã€‚

### æ³›å‹ç±»ã€æ¥å£ã€æ–¹æ³•çš„å£°æ˜

åœ¨æˆ‘ä»¬å£°æ˜æ³›å‹çš„æ—¶å€™ç»å¸¸å¸¦ç€ç»‘å®šçš„ç±»å‹å‚æ•°ï¼Œæ¯”å¦‚ `List<E>` ç­‰ç­‰ï¼Œè¿™é‡Œçš„ E å°±æ˜¯ç±»å‹å‚æ•°ï¼Œç±»å‹å‚æ•°æœ‰ä¸€äº› `çº¦å®š(conventions)`ï¼Œå¦‚ä¸‹ï¼š

+ E - Element (used extensively by the Java Collections Framework)
+ K - Key
+ N - Number
+ T - Type
+ V - Value
+ S,U,V etc. - 2nd, 3rd, 4th types

ä½†æ˜¯å¥½åƒå¹³æ—¶å†™çš„æ—¶å€™ï¼Œä¹Ÿå¾ˆå°‘æœ‰äººéµå®ˆã€‚æ¯”å¦‚æˆ‘å°±ç”¨è¿‡ä¸€ä¸ª `VH` çš„ç±»å‹å‚æ•°ï¼Œåªæ˜¯å› ä¸ºç»§æ‰¿äº†ä¸€ä¸ªå«åš ViewHolder çš„ç±»ï¼Œæˆ‘çš„ä½¿ç”¨å°±æ˜¯ä¸ªåä¾‹Â·Â·Â·

å£°æ˜æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ€è·¯æ¸…æ™°å³å¯ã€‚

ç»‘å®šçš„ç±»å‹å‚æ•°æœ‰ä¸€ä¸ªç‚¹ï¼Œæ”¯æŒå¤šç»‘å®š(Multiple Bounds)

`T extends A & B & C`

### åŸå§‹ç±»å‹(Raw Type)

åŸå§‹ç±»å‹åœ¨ JDK 5.0 çš„æ—¶å€™æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬ä½¿ç”¨åŸå§‹ç±»å‹ç¼–è¯‘å™¨å‡ä¼šæŠ¥ warningï¼Œ`Raw use of parameterized class 'ItemViewBinder' `

æ‰€ä»¥åŸå§‹ç±»å‹æ˜¯ä¸å»ºè®®ä½¿ç”¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬çš„å„ç§æ³›å‹è½®å­ä¸­å¯èƒ½å……æ–¥ç€ warningï¼Œè™½ç„¶è¿è¡Œæ—¶ `å¯èƒ½` ä¸å­˜åœ¨é—®é¢˜ï¼Œä½†æ˜¯å…¶å®æ˜¯ä¸è§„èŒƒçš„ã€‚

å› ä¸ºä½¿ç”¨åŸå§‹ç±»å‹ç»•è¿‡äº†ç¼–è¯‘å™¨çš„ç±»å‹æ£€æŸ¥ï¼Œè€Œè®©ä½ çš„ä»£ç å˜å¾—ä¸å†å®‰å…¨ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µè¢«å„ç§æ³›å‹æ–‡ç« ç”¨çƒ‚äº†çš„ä»£ç 

```java
List names = new ArrayList(); // warning: raw type!
names.add("John");
names.add("Mary");
names.add(Boolean.FALSE); // not a compilation error!
for (Object o : names) {
    String name = (String) o;
    System.out.println(name);
} // throws ClassCastException!
  //    java.lang.Boolean cannot be cast to java.lang.String
```

ä¸Šé¢ä»£ç ä½¿ç”¨äº†åŸå§‹ç±»å‹ Listï¼Œç»•è¿‡äº†ç¼–è¯‘å™¨çš„æ£€æŸ¥ï¼Œä½ å¯ä»¥åŠ å…¥ä»»ä½•ç±»å‹ï¼Œä½†æ˜¯å½“ä½ å–å‡º List ä¸­çš„å…ƒç´ æ—¶ï¼Œå´å®Œå…¨ä¸çŸ¥é“ç±»å‹ï¼Œå¾ˆå®¹æ˜“å°±ä¼šäº§ç”Ÿ ClassCastExceptionã€‚

### æ³›å‹çš„ç»§æ‰¿å’Œå­ç±»å‹

![](/img/in-post/generics-subtypeRelationship.gif)

å¯ä»¥çœ‹åˆ° `Integer extends Number`ï¼Œä½†æ˜¯ `Box<Integer>` å’Œ `Box<Number>` å´ä¸æ˜¯ç»§æ‰¿å…³ç³»ã€‚

çœ‹çœ‹ä¸‹é¢çš„ä»£ç 

```java
public static void main(String[] args) {
    Integer[] integers = new Integer[0];
    List<Integer> integerList = new ArrayList<>();
    testGenericInheritance(integerList); // compile error
    testArrayInheritance(integers); // ok
}

private static void testArrayInheritance(Number[] numbers) {}

private static void testGenericInheritance(List<Number> integerList) {}
```

è¿™ä¹Ÿæ˜¯å¸¸è¯´çš„ java æ•°ç»„æ˜¯ `åå˜(covariant)` çš„ï¼Œä½†æ˜¯è¿™ä¹ˆçœ‹æ³›å‹å°±ä¸è¡Œäº†ï¼Ÿä¹Ÿä¸æ˜¯ï¼Œ`é€šé…ç¬¦(Wildcards)` å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹ã€‚

è¿˜æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œæ”¹ä¸€ä¸‹

```java  
public static void main(String[] args) {
    Integer[] integers = new Integer[0];
    List<Integer> integerList = new ArrayList<>();
    testGenericInheritance(integerList); // ok
}

private static void testGenericInheritance(List<? extends Number> integerList) {}
```

è¿™æ ·å°±ç¼–è¯‘é€šè¿‡äº†ã€‚

ä½†æ˜¯ä¸ºä»€ä¹ˆ `List<Integer>` å´ä¸æ˜¯ `List<Number>` çš„å­ç±»å‘¢ï¼Ÿåœ¨è¯­ä¹‰å±‚é¢å’Œæ•°å­¦é€»è¾‘çœ‹å®Œå…¨æ˜¯æ­£ç¡®çš„ã€‚

å¯èƒ½æ˜¯å®³æ€•è¿™ç§è¯­ä¹‰çš„å‡ºç°

```java
public static void main(String[] args) {
    List<Integer> integerList = new ArrayList<>();
    List<Number> numberList = integerList;
    numberList.add(0f);
}
```

å¦‚æœ `List<Integer> æ˜¯ List<Number>` çš„å­ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `List<Number> æ¥æ”¶ List<Integer>`ï¼Œå¤šæ€çš„ä½“ç°ã€‚

è¿™ä¸ªæ—¶å€™ï¼ŒnumberList.add(double) å®Œå…¨æ­£ç¡®ï¼Œä½†æ˜¯ List ç¡®æ˜¯ Integerï¼Œäº’ç›¸çŸ›ç›¾ã€‚

### ç±»å‹æ¨æ–­(Type Inference)

çœ‹çœ‹ä¸‹é¢çš„ä»£ç 

```java
public static void main(String[] args) {
    Serializable s = pick("d", new ArrayList<String>()); // ok
    String s1 = pick("d", new ArrayList<String>()); // compile error
    List<String> s2 = pick("d", new ArrayList<String>()); // compile error
}

private static <T> T pick(T a1, T a2) {
    return a2;
}
```

å½“ä½¿ç”¨æ³›å‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšç±»å‹æ¨å¯¼ï¼Œ

### é€šé…ç¬¦(Wildcards)

é€šé…ç¬¦ç›¸å…³çš„å­ç±»å‹å…³ç³»å¦‚ä¸‹å›¾ï¼š  

![](/img/in-post/generics-wildcardSubtyping.gif)

æ‰€ä»¥å½“ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œæ˜¯å­˜åœ¨ç»§æ‰¿å…³ç³»çš„ã€‚

#### ä¸Šç•Œé€šé…ç¬¦(Upper Bounded Wildcards)

`? extends Type` å³ä¸ºä¸Šç•Œé€šé…ç¬¦

çœ‹ä¸‹é¢è¿™æ®µä»£ç 

```java
public static void main(String[] args) {
    List<? extends Number> numbers = new ArrayList<>();
    List<? extends Number> numbers2 = new ArrayList<>();
    numbers.add(1); // compile error
    numbers.add(new Object()); // compile error
    numbers.add(null); // ok
    numbers2.add(numbers2.get(0)); // compile error
}
```

ä¸€ç›´éƒ½æœ‰ä¸€ç§æ€ç»´å®šå¼ï¼Œåƒä»£ç ä¸­çš„ numbers åº”è¯¥æ˜¯å­˜å‚¨ Number ä»¥åŠ Numbers å­ç±»ã€‚

ä½†æ˜¯ add(1) å´ç¼–è¯‘æŠ¥é”™äº†ï¼Œadd(Object) ä¹ŸæŠ¥é”™äº†ï¼Œç”šè‡³æˆ‘åˆ›å»ºäº†å’Œ numbers ä¸€æ¨¡ä¸€æ ·çš„ numbers2ï¼Œadd(numbers2.get(0)) ä¹Ÿç¼–è¯‘æŠ¥é”™ã€‚

è¿™éƒ½æ˜¯ç¼–è¯‘å™¨ä½œç”¨çš„ä½“ç°ï¼Œä½¿ç”¨äº†é€šé…ç¬¦åï¼Œ`List<? extends Number>` åœ¨ç¼–è¯‘å™¨çœ¼ä¸­ï¼Œå®ƒçš„å…ƒç´ ç±»å‹æ˜¯ `CAP#1`ï¼Œåº”è¯¥æ˜¯ç¼–è¯‘å™¨æŒ‰é¡ºåºå®šçš„ä¸€ä¸ªå€¼ã€‚

æ‰€ä»¥æˆ‘ä»¬çŸ¥é“äº†ï¼Œä¸Šç•Œé€šé…ç¬¦æ˜¯æ— æ³•æ·»åŠ ä»»ä½•å…ƒç´ çš„(null é™¤å¤–)ï¼Œæ‰€ä»¥å¾ˆå¤šæ–‡ç« ä¹Ÿè¯´äº†å®ƒæ˜¯ `åªè¯»` ç±»å‹ï¼Œå¦‚æœä½ æƒ³éšæ„æ”¹åŠ¨é‚£ä¹ˆç›´æ¥ä½¿ç”¨ `List<Number>`ã€‚

ä½†æ˜¯åˆè¦è®°ä½ä¹‹å‰çš„ä¾‹å­ï¼Œåœ¨ Java ä¸­ `List<Number> å’Œ List<Integer> å’Œ List<Double>` æ²¡ä»»ä½•ç»§æ‰¿å…³ç³»ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³å†™ä¸€æ®µé€šç”¨é€»è¾‘ï¼Œå¤„ç† `List<Number> å’Œ List<Integer> å’Œ List<Double>` ä¸­çš„ Number å…ƒç´ ï¼Œè¿˜æ˜¯é€ƒä¸å¼€ä½¿ç”¨é€šé…ç¬¦ã€‚

#### ä¸‹ç•Œé€šé…ç¬¦(Lower Bounded Wildcards)

`? super Type` å³ä¸ºä¸‹ç•Œé€šé…ç¬¦

çœ‹ä¸‹é¢è¿™æ®µä»£ç 

```java
public static void main(String[] args) {
    List<? super Number> numbers = new ArrayList<>();
    List<? super Number> numbers2 = new ArrayList<>();
    numbers.add(1); // ok
    numbers.add(new BigInteger(new byte[]{})); // ok
    numbers.add(new Object()); // compile error
    numbers.add(null); // ok
    numbers2.add(numbers2.get(0)); // compile error
    Number num1 = numbers.get(0); // compile error
    Object num2 = numbers.get(0); // ok
}
```

ä½¿ç”¨ä¸‹ç•Œé€šé…ç¬¦å¯ä»¥ add Number å­ç±»å…ƒç´ ï¼Œä½†æ˜¯ get è¯»å–çš„æ—¶å€™å´åªèƒ½ç”¨ Object ç±»æ¥æ”¶ã€‚

#### æ— ç•Œé€šé…ç¬¦(unBounded Wildcards)

ï¼Ÿ å³ä¸ºæ— ç•Œé€šé…ç¬¦

`List<?>` å’Œ `List<Object>` å´ä¸ç›¸åŒï¼Œ`List<?>` åŒæ ·åªèƒ½æ·»åŠ  null ä½œä¸ºå…ƒç´ 

#### å°ç»“

ä¸Šç•Œé€šé…ç¬¦é€šå¸¸ä»£è¡¨äº†åªè¯»ï¼Œè€Œä¸‹ç•Œé€šé…ç¬¦è¡¨ç¤ºäº†å¯å†™(å½“ç„¶ä¹Ÿå¯è¯»ï¼Œä½†æ˜¯æ˜¯ Object)ã€‚

è¿™é‡Œè¯´ä¸€è¯´ï¼Œ`åå˜(covariant)` å’Œ `é€†å˜(contravariant)`

+ ğ‘“(â‹…)æ˜¯é€†å˜ï¼ˆcontravariantï¼‰çš„ï¼Œå½“ğ´â‰¤ğµæ—¶æœ‰ğ‘“(ğµ)â‰¤ğ‘“(ğ´)æˆç«‹ï¼›
+ ğ‘“(â‹…)æ˜¯åå˜ï¼ˆcovariantï¼‰çš„ï¼Œå½“ğ´â‰¤ğµæ—¶æœ‰ğ‘“(ğ´)â‰¤ğ‘“(ğµ)æˆç«‹ï¼›
+ ğ‘“(â‹…)æ˜¯ä¸å˜ï¼ˆinvariantï¼‰çš„ï¼Œå½“ğ´â‰¤ğµæ—¶ä¸Šè¿°ä¸¤ä¸ªå¼å­å‡ä¸æˆç«‹ï¼Œå³ğ‘“(ğ´)ä¸ğ‘“(ğµ)ç›¸äº’ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ã€‚

æ‰€ä»¥é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œä½¿ç”¨é€šé…ç¬¦åã€‚

ä¸Šç•Œé€šé…ç¬¦å®ç°äº†åå˜ï¼Œä¸‹ç•Œé€šé…ç¬¦å®ç°äº†é€†å˜

```java
List<? extends Number> list = new ArrayList<Integer>();
List<? super Number> list = new ArrayList<Object>();
```

### ç±»å‹æ“¦é™¤å’Œæ¡¥æ–¹æ³•

é¦–å…ˆ Java çš„æ³›å‹æ˜¯ `ç¼–è¯‘å™¨(compiler)` åœ¨ `ç¼–è¯‘æ—¶` å¸®æˆ‘ä»¬åšçš„ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å®ç°çš„ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ `ç±»å‹æ“¦é™¤(Type Erasure)` å’Œ æˆ‘ä»¬ç»å¸¸è¯´çš„ `ä¼ªæ³›å‹`ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å£°æ˜çš„ç±»å‹å‚æ•°éƒ½ä¼šè¢«æ“¦é™¤æ‰ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œç¼–è¯‘å™¨å°±ä»€ä¹ˆä¹Ÿæ²¡æœ‰åšäº†ä¹ˆï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œç¼–è¯‘å™¨ä¹Ÿè®¸è¿˜ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆæ¡¥æ–¹æ³•ã€‚

çœ‹è¿™æ®µä»£ç 

```java
public class Node<T> {

    public T data;

    public Node(T data) { this.data = data; }
    
    public void setData(T data) {
        System.out.println("Node.setData");
        this.data = data;
    }
}

public class MyNode extends Node<Integer> {
    public MyNode(Integer data) { super(data); }

    @Override
    public void setData(Integer data) {
        System.out.println("MyNode.setData");
        super.setData(data);
    }
}

MyNode mn = new MyNode(5);
Node n = mn;            // A raw type - compiler throws an unchecked warning
n.setData("Hello");     
Integer x = mn.data;    // Causes a ClassCastException to be thrown.
```

è¿™æ®µä»£ç ç¡®å®æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ˜¯å› ä¸º setData è°ƒç”¨äº† Node çš„ setData(Object data)(ç±»å‹æ“¦é™¤ä»¥åï¼Œ T å˜ä¸º Object) æ–¹æ³•ï¼Œä»è€Œå¯¼è‡´ Node.data = Stringï¼Œè€Œ mn åˆæ˜¯ MyNode ç±»å‹(`extends Node<Integer>`)ï¼Œæ‰€ä»¥ Integer x = mn.dataï¼Œç¼–è¯‘å¹¶æ²¡æœ‰é—®é¢˜ï¼Œæœ€ç»ˆè¿è¡Œæ—¶æŠ¥é”™ï¼ŒæŠ¥é”™åœ¨äº† mn.data å¼ºè½¬ String ä¸Šï¼ŒæŠ¥é”™ä¹Ÿè®©äººå¾ˆå›°æƒ‘ï¼Œä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚ä¸”æˆ‘ä»¬ä»¥ä¸ºæ˜¯é‡å†™äº† setData æ–¹æ³•ï¼Œå…¶å®ä¸ç„¶ï¼Œç›´æ¥è°ƒç”¨çš„çˆ¶ç±»çš„ setData æ–¹æ³•ã€‚

æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆæ¡¥æ–¹æ³•ã€‚

é€šè¿‡ javap -v MyNode.class æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° MyNode ä¸­å±…ç„¶å¤šäº†ä¸€ä¸ª setData(Object) æ–¹æ³•

```java
  public void setData(java.lang.Integer);
    descriptor: (Ljava/lang/Integer;)V
    flags: ACC_PUBLIC
    Code:
      stack=2, locals=2, args_size=2
         0: aload_0
         1: aload_1
         2: invokespecial #2                  // Method Node.setData:(Ljava/lang/Object;)V
         5: return
      LineNumberTable:
        line 18: 0
        line 19: 5
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       6     0  this   LMyNode;
            0       6     1  data   Ljava/lang/Integer;

  public void setData(java.lang.Object);
    descriptor: (Ljava/lang/Object;)V
    flags: ACC_PUBLIC, ACC_BRIDGE, ACC_SYNTHETIC
    Code:
      stack=2, locals=2, args_size=2
         0: aload_0
         1: aload_1
         2: checkcast     #3                  // class java/lang/Integer
         5: invokevirtual #4                  // Method setData:(Ljava/lang/Integer;)V
         8: return
      LineNumberTable:
        line 13: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       9     0  this   LMyNode;
```

å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬ç»™ MyNode ç”Ÿæˆäº†ä¸€ä¸ª setData(Object) æ–¹æ³•ï¼Œä»è€Œå®ç°äº†æˆ‘ä»¬è°ƒç”¨ setData("Hello") æ—¶ï¼Œè°ƒç”¨çš„æ˜¯å…·ä½“çš„å­ç±»çš„ setData(Object) æ–¹æ³•è€Œä¸æ˜¯çˆ¶ç±»çš„æ–¹æ³•ã€‚åŒæ—¶ï¼ŒsetData æ–¹æ³•å†…éƒ¨å¼ºè½¬ç±»å‹ Integerï¼Œç„¶åè°ƒç”¨äº† setData(Integer) æ–¹æ³•ã€‚

è™½ç„¶æœ€ç»ˆä»£ç è¿˜æ˜¯æŠ¥é”™ï¼Œä½†æ˜¯å…¶ç¬¦åˆé€»è¾‘ï¼ŒæŠ¥é”™ä½ç½®ä¹Ÿåœ¨ setData ä¸­ï¼Œè°ƒç”¨çš„ä¹Ÿæ˜¯è‡ªå·±çš„ setData è€Œä¸æ˜¯çˆ¶ç±»çš„ setDataã€‚

æ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œç¼–è¯‘å™¨æœ‰ç€ç¥å¥‡çš„ä½œç”¨ã€‚

### å…¨æ–‡æ— å…³

æˆ‘æœ€è¿‘æ€»æ˜¯æ¥æ‰‹ä¸€äº›è«åå…¶å¦™çš„ bugï¼Œè€Œä¸”ååˆ†ç¥å¥‡ï¼Œæ¯”å¦‚æŠ¥ NullPointerExceptionï¼Œè¿™æœ¬æ˜¯æœ€ç®€å•çš„å¼‚å¸¸ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„ç¼–è¯‘è¿‡ç¨‹æœ‰ä»€ä¹ˆéªšæ“ä½œä¹ˆï¼Ÿåæ­£æ²¡æ³•è¿˜åŸè¡Œå·ï¼Œå¯¼è‡´æˆ‘åªèƒ½çŒœÂ·Â·Â·æ›´ç¥å¥‡çš„æ˜¯ï¼Œæ¯ä¸€è¡Œä»£ç éƒ½è¿›è¡Œäº† null åˆ¤æ–­ï¼Œä¾ç„¶ crashï¼Œä¸”æ— è®ºæ˜¯è‡ªå·±è¿˜æ˜¯æµ‹è¯•éƒ½æ— æ³•å¤ç°Â·Â·Â·

å½“ä½ ä»¬é‡åˆ°è¿™ç§ bug çš„æ—¶å€™åˆè¯¥æ€ä¹ˆæ”¹å‘¢ï¼Ÿ